{% extends 'base.html' %}
{% load static %}


{% block styles %}
    {{block.super}}
    <link rel="stylesheet" href="{% static 'css/cases.css' %}">
{% endblock styles %}


{% block scripts %}
    {{ block.super }}
    <script src="{% static 'dist/cases.js' %}" type="module"></script>
{% endblock scripts %}


{% block content %}
<div class="mdc-card card-w-title cases-card">
    <div class="tabs-and-search">
        <div class="mdc-tab-bar" role="tablist">
          <div class="mdc-tab-scroller">
            <div class="mdc-tab-scroller__scroll-area">
              <div class="mdc-tab-scroller__scroll-content">
                <button id="case-list-button" class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                  <span class="mdc-tab__content">
                    <span class="mdc-tab__icon material-icons" aria-hidden="true">folder_shared</span>
                    <span class="mdc-tab__text-label">Cases</span>
                  </span>
                  <span class="mdc-tab-indicator mdc-tab-indicator--active">
                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                  </span>
                  <span class="mdc-tab__ripple"></span>
                </button>

                {% if user.is_authenticated %}
                <button id="create-case-button" class="mdc-tab" role="tab">
                  <span class="mdc-tab__content">
                    <span class="mdc-tab__icon material-icons" aria-hidden="true">add_circle</span>
                    <span class="mdc-tab__text-label">Create Case</span>
                  </span>
                  <span class="mdc-tab-indicator">
                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                  </span>
                  <span class="mdc-tab__ripple"></span>
                </button>
                {% endif %}
              </div>
            </div>
          </div>

        </div>
        <div class="search-div">
            <label class="mdc-text-field mdc-text-field--filled mdc-text-field--with-leading-icon" id="filter-field">
              <i aria-hidden="true" class="material-icons mdc-text-field__icon" style="margin-left: 8px; margin-right: 8px;">search</i>
              <span class="mdc-text-field__ripple"></span>
              <span class="mdc-floating-label">Filter</span>
              <input class="mdc-text-field__input" type="text" id="filter-input">
              <span class="mdc-line-ripple"></span>
            </label>
        </div>
    </div>

    <div class="card-text">
        <div id="case-list-div">
            <div class="mdc-data-table">
            <div class="mdc-data-table__table-container">
              <table id="cases-table" class="mdc-data-table__table" aria-label="Cases Table">
                <thead>
                  <tr class="mdc-data-table__header-row">
                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-attribute="status">Status</th>
                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-attribute="build">Build</th>
                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-attribute="coordinates">Coordinates</th>
{#                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-attribute="phenotypes">Phenotypes</th>#}
                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-attribute="evidence">Evidence</th>
                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-attribute="comments">Comments</th>
                    <th class="mdc-data-table__header-cell" role="columnheader" scope="col" data-sortable="false" data-attribute="link"></th>
                  </tr>
                </thead>
                <tbody class="mdc-data-table__content" id="cases-tbody"></tbody>
              </table>
            </div>

            <div class="mdc-data-table__pagination">
              <div class="mdc-data-table__pagination-trailing">
                <div class="mdc-data-table__pagination-rows-per-page">
                  <div class="mdc-data-table__pagination-rows-per-page-label">
                    Rows per page
                  </div>

                  <div class="mdc-select mdc-select--outlined mdc-select--no-label mdc-data-table__pagination-rows-per-page-select">
                    <div class="mdc-select__anchor" role="button" aria-haspopup="listbox"
                          aria-labelledby="demo-pagination-select" tabindex="0">
                      <span class="mdc-select__selected-text-container">
                        <span id="demo-pagination-select" class="mdc-select__selected-text">10</span>
                      </span>
                      <span class="mdc-select__dropdown-icon">
                        <svg
                            class="mdc-select__dropdown-icon-graphic"
                            viewBox="7 10 10 5">
                          <polygon
                              class="mdc-select__dropdown-icon-inactive"
                              stroke="none"
                              fill-rule="evenodd"
                              points="7 10 12 15 17 10">
                          </polygon>
                          <polygon
                              class="mdc-select__dropdown-icon-active"
                              stroke="none"
                              fill-rule="evenodd"
                              points="7 15 12 10 17 15">
                          </polygon>
                        </svg>
                      </span>
                      <span class="mdc-notched-outline mdc-notched-outline--notched">
                        <span class="mdc-notched-outline__leading"></span>
                        <span class="mdc-notched-outline__trailing"></span>
                      </span>
                    </div>

                    <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth" role="listbox">
                      <ul class="mdc-list">
                        <li class="mdc-list-item mdc-list-item--selected" aria-selected="true" role="option" data-value="10">
                          <span class="mdc-list-item__text">10</span>
                        </li>
                        <li class="mdc-list-item" role="option" data-value="25">
                          <span class="mdc-list-item__text">25</span>
                        </li>
                        <li class="mdc-list-item" role="option" data-value="100">
                          <span class="mdc-list-item__text">100</span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="mdc-data-table__pagination-navigation">
                  <div class="mdc-data-table__pagination-total">
                    <span class="start-num"></span>-<span class="end-num"></span> of <span class="total-num"></span>
                  </div>

                  <button class="mdc-icon-button material-icons mdc-data-table__pagination-button" data-first-page="true" disabled>
                    <div class="mdc-icon-button__ripple"></div>first_page
                  </button>
                  <button class="mdc-icon-button material-icons mdc-data-table__pagination-button" data-prev-page="true" disabled>
                    <div class="mdc-icon-button__ripple"></div>chevron_left
                  </button>
                  <button class="mdc-icon-button material-icons mdc-data-table__pagination-button" data-next-page="true">
                    <div class="mdc-icon-button__ripple"></div>chevron_right
                  </button>
                  <button class="mdc-icon-button material-icons mdc-data-table__pagination-button" data-last-page="true">
                    <div class="mdc-icon-button__ripple"></div>last_page
                  </button>
                </div>
              </div>
            </div>
        </div>
        </div>
        <div id="create-case-div"><div id="create-case-content">
            <div>
                Please use this form to submit cases where TAD disruption may be of clinical relevance. These cases can
                either be from publicly available peer-reviewed publications or your own clinical cases of interest.
                <ul>
                    <li>If submitting a case from a publication, please include the PubMed ID.</li>
                    <li> If submitting a clinical case, please include information about genetic testing that has been performed.</li>
                    <li><span class="text-warning">Do not submit protected health information.</span></li>
                </ul>
            </div>

            <div class="mdc-select mdc-select--outlined mdc-select--required" id="build-select">
                    <div class="mdc-select__anchor" aria-labelledby="build-select-label" aria-required="true">
                    <span class="mdc-notched-outline">
                      <span class="mdc-notched-outline__leading"></span>
                      <span class="mdc-notched-outline__notch">
                        <span id="build-select-label" class="mdc-floating-label">Build</span>
                      </span>
                      <span class="mdc-notched-outline__trailing"></span>
                    </span>
                        <span class="mdc-select__selected-text-container">
                      <span id="hpo-selected-text" class="mdc-select__selected-text"></span>
                    </span>
                        <span class="mdc-select__dropdown-icon">
                      <svg
                              class="mdc-select__dropdown-icon-graphic"
                              viewBox="7 10 10 5" focusable="false">
                        <polygon
                                class="mdc-select__dropdown-icon-inactive"
                                stroke="none"
                                fill-rule="evenodd"
                                points="7 10 12 15 17 10">
                        </polygon>
                        <polygon
                                class="mdc-select__dropdown-icon-active"
                                stroke="none"
                                fill-rule="evenodd"
                                points="7 15 12 10 17 15">
                        </polygon>
                      </svg>
                    </span>
                    </div>

                    <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                        <ul class="mdc-list" id="build-hpo-ul" role="listbox">
                          <li class="mdc-list-item" aria-selected="false" data-value="NCBI36" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">
                              hg18 / NCBI36
                            </span>
                          </li>
                          <li class="mdc-list-item" aria-selected="false" data-value="GRCh37" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">
                              hg19 / GRCh37
                            </span>
                          </li>
                          <li class="mdc-list-item" aria-selected="false" data-value="GRCh38" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">
                              hg38 / GRCh38
                            </span>
                          </li>
                        </ul>
                    </div>
                </div>
            <label id="coordinates-field" class="mdc-text-field mdc-text-field--outlined">
                    <span class="mdc-notched-outline">
                    <span class="mdc-notched-outline__leading"></span>
                    <span class="mdc-notched-outline__notch">
                        <span class="mdc-floating-label" id="lookup-label">Coordinates</span>
                    </span>
                    <span class="mdc-notched-outline__trailing"></span>
                    </span>
                        <input id="coordinates-input" type="text" class="mdc-text-field__input"
                               aria-labelledby="lookup-helper" aria-controls="lookup-helper"
                               aria-describedby="coordinates-helper" required>
                </label>
            <label id="pubmed-ids-field" class="mdc-text-field mdc-text-field--outlined">
                <span class="mdc-notched-outline">
                    <span class="mdc-notched-outline__leading"></span>
                    <span class="mdc-notched-outline__notch">
                        <span class="mdc-floating-label" id="pubmed-label">PubMed IDs</span>
                    </span>
                    <span class="mdc-notched-outline__trailing"></span>
                </span>
                <input id="pubmed-input" type="text" class="mdc-text-field__input">
            </label>
            {% include 'hpo_lookup_input.html' %}
            <label id="phenotypes-field" class="mdc-text-field mdc-text-field--outlined">
                <span class="mdc-notched-outline">
                <span class="mdc-notched-outline__leading"></span>
                <span class="mdc-notched-outline__notch">
                    <span class="mdc-floating-label" id="lookup-label">HPO Phenotypes</span>
                </span>
                <span class="mdc-notched-outline__trailing"></span>
                </span>
                    <input id="phenotypes-input" type="text" class="mdc-text-field__input" aria-labelledby="lookup-helper"
                           aria-controls="lookup-helper"
                           aria-describedby="coordinates-helper" required>
            </label>

            <div class="mdc-form-field" id="evidence-field" >
              <div id="evidence-title">Evidence for Case:</div>

              <div class="checkbox-div"><div class="mdc-checkbox">
                <input type="checkbox" class="mdc-checkbox__native-control" id="checkbox-ge" data-value="Gene Expression"/>
                <div class="mdc-checkbox__background">
                  <svg class="mdc-checkbox__checkmark"
                       viewBox="0 0 24 24">
                    <path class="mdc-checkbox__checkmark-path"
                          fill="none"
                          d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
                  </svg>
                  <div class="mdc-checkbox__mixedmark"></div>
                </div>
                <div class="mdc-checkbox__ripple"></div>
              </div>
              <label for="checkbox-ge">Gene Expression</label></div>

              <div class="checkbox-div"><div class="mdc-checkbox">
                <input type="checkbox" class="mdc-checkbox__native-control" id="checkbox-hic" data-value="Hi-C/5C/4C"/>
                <div class="mdc-checkbox__background">
                  <svg class="mdc-checkbox__checkmark"
                       viewBox="0 0 24 24">
                    <path class="mdc-checkbox__checkmark-path"
                          fill="none"
                          d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
                  </svg>
                  <div class="mdc-checkbox__mixedmark"></div>
                </div>
                <div class="mdc-checkbox__ripple"></div>
              </div>
              <label for="checkbox-hic">Hi-C/5C/4C</label></div>

              <div class="checkbox-div"><div class="mdc-checkbox">
                <input type="checkbox" class="mdc-checkbox__native-control" id="checkbox-am" data-value="Animal Model"/>
                <div class="mdc-checkbox__background">
                  <svg class="mdc-checkbox__checkmark"
                       viewBox="0 0 24 24">
                    <path class="mdc-checkbox__checkmark-path"
                          fill="none"
                          d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
                  </svg>
                  <div class="mdc-checkbox__mixedmark"></div>
                </div>
                <div class="mdc-checkbox__ripple"></div>
              </div>
              <label for="checkbox-am">Animal Model</label></div>

              <div class="checkbox-div"><div class="mdc-checkbox">
                <input type="checkbox" class="mdc-checkbox__native-control" id="checkbox-coi" data-value="Statistical/Case of Interest"/>
                <div class="mdc-checkbox__background">
                  <svg class="mdc-checkbox__checkmark"
                       viewBox="0 0 24 24">
                    <path class="mdc-checkbox__checkmark-path"
                          fill="none"
                          d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
                  </svg>
                  <div class="mdc-checkbox__mixedmark"></div>
                </div>
                <div class="mdc-checkbox__ripple"></div>
              </div>
              <label for="checkbox-coi">Statistical/Case of Interest</label></div>
            </div>

            <label id="comments-field"
                   class="mdc-text-field mdc-text-field--outlined mdc-text-field--textarea mdc-text-field">
                <span class="mdc-notched-outline">
                <span class="mdc-notched-outline__leading"></span>
                <span class="mdc-notched-outline__notch">
                    <span class="mdc-floating-label" id="comments-label">Comments</span>
                </span>
                <span class="mdc-notched-outline__trailing"></span>
                </span>
                <span class="mdc-text-field__resizer">
                    <textarea class="mdc-text-field__input" aria-labelledby="comments-label" width="100%"></textarea>
                </span>
            </label>
            <button id="submit-data-button" class="mdc-button mdc-button--touch mdc-button--raised" type="button">
                <div class="mdc-button__ripple"></div>
                <div class="mdc-button__label">Submit</div>
                <div class="mdc-button__touch"></div>
            </button>
        </div></div>
    </div>
</div>

<div id="case-dialog" class="mdc-dialog">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface" id="my-dialog-surface" role="alertdialog" aria-modal="true"
          aria-labelledby="my-dialog-title" aria-describedby="my-dialog-content">
          <div class="mdc-dialog__content" id="case-dialog-content">
            <div class="case-info-header"><h2>Case Information</h2></div>
            <div class="case-info-label">Status:</div><div id="case-status" class="track-info"></div>
            <div class="case-info-label">Submitted By:</div><div id="case-submitter" class="track-info"></div>
            <div class="case-info-label">Build:</div><div id="case-build" class="track-info"></div>
            <div class="case-info-label">Coordinates:</div><div id="case-coordinates" class="track-info"></div>
            <div class="case-info-label">Phenotypes:</div><div id="case-phenotypes" class="track-info"></div>
            <div class="case-info-label">PubMed IDs:</div><div id="case-pubmed" class="track-info"></div>
            <div class="case-info-label">Evidence:</div><div id="case-evidence" class="track-info"></div>
            <div class="case-info-label">Comments:</div><div id="case-details" class="track-info"></div>
          </div>
          <div class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="cancel">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">Close</span>
            </button>
          </div>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>

{% include 'cases_help.html' %}

<script>
    const cases = {{ cases | safe }};
</script>
{% endblock content %}
